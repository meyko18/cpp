# C++ 左值、右值与引用

## 1. 左值和右值

### 1.1 左值

左值（Lvalue）是可以出现在赋值运算符左边的表达式。它表示一个对象的存储位置。

**例子**:
```cpp
int x = 10;  // x is an lvalue
x = 20;      // x can appear on the left of =
```

### 1.2 右值

右值（Rvalue）是可以出现在赋值运算符右边但不可以出现在赋值运算符左边的表达式。它不表示一个对象的存储位置。

**例子**:

cpp

```cpp
int x = 10 + 20;  // 10 + 20 is an rvalue
```

### 1.3 注意事项

*   左值有持久的存储期，而右值是临时的。
*   左值可以有名称，而右值通常没有名称。

### 1.4 结论

理解左值和右值是理解C++引用、移动语义和其他高级特性的基础。

2\. 引用分类
--------

### 2.1 三种形式的引用

* **左值引用**: 通常用于传递函数参数和返回函数结果。

  cpp

  ```cpp
  int x = 10;
  int& ref = x;
  ```

* **const引用**: 可以绑定到临时对象上。

  cpp

  ```cpp
  const int& cref = 10 + 20;
  ```

* **右值引用 (C++11)**: 用于支持移动语义。

  cpp

  ```cpp
  int&& rref = 10 + 20;
  ```

### 2.2 ++i 和 i++ 的区别

*   `++i` 是前置递增，先增加然后返回增加后的值。
*   `i++` 是后置递增，返回当前值然后再增加。

### 2.3 C++11 引用新数据类型 &&

右值引用是C++11引入的，主要用于实现移动语义和完美转发。

### 2.4 移动对象如何发生

移动对象是通过移动构造函数和移动赋值运算符实现的，它们接受一个右值引用参数。

### 2.5 总结

引用是C++中的一个强大工具，它允许我们创建别名、传递参数和返回结果，而不需要复制对象。

3\. std::move函数
---------------

### 3.1 C++11标准库里的新函数

`std::move` 是一个模板函数，它接受一个左值参数并返回该参数的右值引用。

### 3.2 把一个左值强制转换成一个右值

使用 `std::move` 可以将左值转换为右值，从而触发移动语义。

cpp

```cpp
std::string str = "hello";
std::string movedStr = std::move(str);
```

### 3.3 移动构造函数

移动构造函数接受一个右值引用参数，并从该参数"移动"资源，而不是复制它们。

4\. 左值和右值总结说明
-------------

左值和右值是C++中两种基本的表达式分类。理解它们以及与它们相关的引用类型对于理解C++的高级特性，如移动语义，至关重要。
